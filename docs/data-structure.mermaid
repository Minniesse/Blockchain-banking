classDiagram
    %% On-Chain Data Structures
    class LendingPool {
        +address poolAddress
        +uint256 totalLiquidity
        +uint256 utilizationRate
        +uint256 lendingRate
        +uint256 borrowingRate
        +mapping(address => UserPosition) positions
        +deposit(uint256 amount)
        +withdraw(uint256 amount)
        +borrow(uint256 amount)
        +repay(uint256 amount)
    }

    class UserPosition {
        +uint256 depositedAmount
        +uint256 borrowedAmount
        +uint256 collateralAmount
        +uint256 lastUpdateTimestamp
        +calculateInterest()
        +updatePosition()
    }

    class Asset {
        +address tokenAddress
        +string symbol
        +uint256 price
        +uint256 collateralFactor
        +uint256 liquidationThreshold
        +bool isActive
    }

    class LiquidationInfo {
        +address borrower
        +address liquidator
        +uint256 liquidatedAmount
        +uint256 timestamp
        +uint256 collateralReceived
    }

    %% Off-Chain Data Structures
    class UserProfile {
        +address walletAddress
        +string email*
        +timestamp lastLogin
        +notification_preferences
        +saveProfile()
        +updatePreferences()
    }

    class TransactionHistory {
        +string txHash
        +address userAddress
        +string actionType
        +uint256 amount
        +timestamp executionTime
        +storeTransaction()
        +getHistory()
    }

    class MarketData {
        +string assetSymbol
        +float currentPrice
        +float24h_change
        +float TVL
        +updateMarketData()
        +getLatestPrices()
    }

    class RiskMetrics {
        +address userAddress
        +float healthFactor
        +float liquidationRisk
        +timestamp lastUpdate
        +calculateRisk()
        +alertUser()
    }

    %% Relationships
    LendingPool "1" -- "*" UserPosition
    LendingPool "1" -- "*" Asset
    UserPosition -- LiquidationInfo
    UserProfile "1" -- "1" UserPosition
    UserProfile "1" -- "*" TransactionHistory
    RiskMetrics "1" -- "1" UserPosition
    MarketData "1" -- "1" Asset

    %% Notes
    note for UserProfile "* Personal data stored off-chain"
    note for LendingPool "Smart Contract: Handles core lending logic"
    note for Asset "Stores supported token information"
